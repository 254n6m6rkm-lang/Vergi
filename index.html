<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="theme-color" content="#0a84ff" media="(prefers-color-scheme: light)">
<meta name="theme-color" content="#0a84ff" media="(prefers-color-scheme: dark)">
<title>GÃ¼mrÃ¼k Vergi HesaplayÄ±cÄ±</title>

<!-- Sistem odaklÄ± tipografi: iOS SF Pro / Android Roboto / Windows Segoe -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400..700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg: #f6f7fb;
    --card: #ffffff;
    --ink: #111114;
    --ink-2:#6b7280;
    --brand:#0a84ff;
    --brand-2:#0666c2;
    --border:#e5e7eb;
    --ok:#10b981;
    --warn:#f59e0b;
    --muted:#f3f4f6;
    --radius:20px;
    --shadow: 0 20px 50px rgba(10,132,255,.18);
    --font: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI",
            Roboto, Inter, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
            "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b0c10;
      --card:#111318;
      --ink:#f5f5f7;
      --ink-2:#a1a1aa;
      --border:#23262d;
      --muted:#151821;
      --shadow: 0 20px 50px rgba(0,0,0,.45);
    }
  }

  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family:var(--font);
    background:var(--bg);
    color:var(--ink);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    line-height:1.45;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:calc(env(safe-area-inset-top) + 18px) 14px calc(env(safe-area-inset-bottom) + 28px);
  }

  .app{
    width:100%;
    max-width:520px;
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    overflow:hidden;
  }

  .app__header{
    padding:20px 18px 8px;
    display:flex;
    gap:12px;
    align-items:center;
    border-bottom:1px solid var(--border);
    background:linear-gradient(180deg, rgba(10,132,255,.1), transparent 60%);
  }
  .logo{
    width:44px;height:44px;border-radius:12px;background:var(--brand);
    display:grid;place-items:center;color:#fff;font-weight:700;letter-spacing:.5px;
    box-shadow:0 10px 20px rgba(10,132,255,.35);
  }
  .title{
    display:flex;flex-direction:column;
  }
  .title h1{
    margin:0;font-size:1.25rem;font-weight:700;letter-spacing:.2px;
  }
  .title span{font-size:.92rem;color:var(--ink-2)}

  form{
    padding:18px;
    display:flex;flex-direction:column;gap:14px;
  }
  .field{
    background:var(--muted);
    border:1px solid var(--border);
    border-radius:16px;
    padding:12px 12px 10px;
  }
  .field label{
    display:flex;justify-content:space-between;align-items:center;
    font-weight:600;font-size:.92rem;margin-bottom:6px;color:var(--ink-2);
  }
  .field input{
    width:100%;
    appearance:textfield;
    border:none;outline:none;
    background:transparent;
    padding:4px 2px 6px;
    font-size:1.15rem;font-weight:600;
    color:var(--ink);
  }
  .field input::placeholder{color:#9aa0a6}
  .tip{font-size:.82rem;color:var(--ink-2);margin-top:2px}

  .actions{
    display:flex;gap:10px;padding:0 18px 18px;
  }
  .btn{
    flex:1;
    border:none;border-radius:16px;
    padding:14px 16px;font-size:1.05rem;font-weight:700;
    background:var(--brand);color:#fff;cursor:pointer;
    transition:transform .08s ease, background .2s ease;
    box-shadow:0 12px 22px rgba(10,132,255,.35);
  }
  .btn:active{transform:scale(.98)}
  .btn--ghost{
    flex:0 0 44%;
    background:transparent;color:var(--brand);
    border:2px solid var(--brand);
    box-shadow:none;
  }
  .btn--ghost:active{transform:scale(.98)}

  .result{
    padding:10px 18px 18px;
  }
  .card{
    background:var(--muted);
    border:1px solid var(--border);
    border-radius:16px;
    padding:14px;
  }
  .row{
    display:flex;gap:10px;align-items:center;justify-content:space-between;
    padding:10px 8px;border-radius:12px;
  }
  .row + .row{margin-top:6px}
  .row__left{display:flex;align-items:center;gap:10px}
  .badge{
    font-size:.78rem;font-weight:700;
    padding:4px 8px;border-radius:999px;
    background:#e7f1ff;border:1px solid #cfe2ff;color:#0955a6;
  }
  @media (prefers-color-scheme: dark){
    .badge{background:#0e223a;border-color:#133153;color:#8ab6ff}
  }
  .value{font-weight:700}

  .sep{height:1px;background:var(--border);margin:12px 0}

  .sum{
    display:flex;justify-content:space-between;align-items:center;
    padding:12px 10px;border-radius:14px;background:#eefbf4;border:1px solid #c7efd9;
    font-weight:800;
  }
  .sum--warn{background:#fff7eb;border-color:#ffe2b7}
  @media (prefers-color-scheme: dark){
    .sum{background:#0f3327;border-color:#18543b}
    .sum--warn{background:#2a1f0a;border-color:#4a3713}
  }

  .progress{
    margin-top:8px;height:10px;border-radius:999px;background:#e5e7eb;overflow:hidden;
  }
  .progress > i{display:block;height:100%;width:0;background:var(--brand);transition:width .4s ease}

  footer{
    padding:14px 18px;color:var(--ink-2);font-size:.9rem;text-align:center;border-top:1px solid var(--border)
  }

  /* A11y focus */
  .btn:focus-visible, .field input:focus-visible{outline:3px solid var(--brand);outline-offset:2px;border-radius:14px}
</style>

<link rel="manifest" href="manifest.webmanifest">
<link rel="apple-touch-icon" href="icons/icon-180.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="default">
<meta name="apple-mobile-web-app-title" content="GÃ¼mrÃ¼k Vergi HesaplayÄ±cÄ±">
</head>
<body>
  <div class="app" role="application" aria-label="GÃ¼mrÃ¼k Vergi HesaplayÄ±cÄ± UygulamasÄ±">
    <header class="app__header">
      <div class="logo" aria-hidden="true">TR</div>
      <div class="title">
        <h1>GÃ¼mrÃ¼k Vergi HesaplayÄ±cÄ±</h1>
        <span>Yeni nesil, mobil odaklÄ±</span>
      </div>
    </header>

    <form id="form" novalidate>
      <div class="field">
        <label for="aracDegeri">
          AraÃ§ DeÄŸeri (â‚º)
          <small class="tip">Fatura/bedel</small>
        </label>
        <input id="aracDegeri" name="aracDegeri" type="number" inputmode="decimal" min="0" step="0.01" placeholder="Ã–rn. 1.250.000" required>
      </div>

      <div class="field">
        <label for="motorHacmi">
          Motor Hacmi (cc)
          <small class="tip">Toplam silindir hacmi</small>
        </label>
        <input id="motorHacmi" name="motorHacmi" type="number" inputmode="numeric" min="0" step="1" placeholder="Ã–rn. 1598" required>
      </div>
    </form>

    <div class="actions">
      <button id="calc" class="btn" aria-label="Vergileri hesapla">Hesapla</button>
      <button id="reset" class="btn btn--ghost" aria-label="Formu temizle" type="button">Temizle</button>
    </div>

    <section class="result" aria-live="polite" aria-atomic="true">
      <div class="card" id="card" hidden>
        <!-- Dinamik iÃ§erik JS ile gelecek -->
      </div>
    </section>

    <footer>Batuhan TatlÄ± â€¢ Mobil Uygulama Deneyimi</footer>
  </div>

<script>
(() => {
  const RATES = { gumruk:0.10, guvenlik:0.025, rihtim:0.044, fiyatIstikrar:0.10, kdv:0.16 };
  const SABIT = { bandrol:33.5, motorKatsayi:6 };
  const el = {
    form: document.getElementById('form'),
    aracDegeri: document.getElementById('aracDegeri'),
    motorHacmi: document.getElementById('motorHacmi'),
    calc: document.getElementById('calc'),
    reset: document.getElementById('reset'),
    card: document.getElementById('card')
  };
  const fmtTL = v => new Intl.NumberFormat('tr-TR',{style:'currency',currency:'TRY',maximumFractionDigits:2}).format(v ?? 0);
  const clamp = n => isFinite(n) && n >= 0 ? n : 0;
  function hesapla(){
    const arac = clamp(parseFloat(el.aracDegeri.value));
    const cc   = clamp(parseFloat(el.motorHacmi.value));
    if(!arac || !cc){alert('LÃ¼tfen geÃ§erli deÄŸerler girin.');return;}
    const kalemler = {
      gumruk:{label:'GÃ¼mrÃ¼k Vergisi',oran:RATES.gumruk,tutar:arac*RATES.gumruk},
      guvenlik:{label:'GÃ¼venlik Kuvvetleri PayÄ±',oran:RATES.guvenlik,tutar:arac*RATES.guvenlik},
      rihtim:{label:'RÄ±htÄ±m Vergisi',oran:RATES.rihtim,tutar:arac*RATES.rihtim},
      fiyatIstikrar:{label:'Fiyat Ä°stikrar Fonu',oran:RATES.fiyatIstikrar,tutar:arac*RATES.fiyatIstikrar},
      motor:{label:'Motor KatkÄ±sÄ±',oran:null,tutar:cc*SABIT.motorKatsayi,not:'Sabit katsayÄ±'},
      bandrol:{label:'Bandrol',oran:null,tutar:SABIT.bandrol,not:'Sabit tutar'},
    };
    const vergiToplami = Object.values(kalemler).reduce((s,k)=> s + k.tutar, 0);
    const araToplam = arac + vergiToplami;
    const kdv = araToplam * RATES.kdv;
    const toplam = araToplam + kdv;
    el.card.hidden = false;
    const rows = Object.values(kalemler).map(k=>{
      const badge = k.oran!=null ? `<span class="badge">%${(k.oran*100).toFixed(1)}</span>`:`<span class="badge">Sabit</span>`;
      const note = k.not ? `<div class="tip">${k.not}</div>`:'';
      return `<div class="row"><div class="row__left">${badge}<div><div>${k.label}</div>${note}</div></div><div class="value">${fmtTL(k.tutar)}</div></div>`;
    }).join('');
    el.card.innerHTML = `<div class="row"><div class="row__left"><span class="badge">ğŸ’³</span><div><div>AraÃ§ DeÄŸeri (Matrah)</div><div class="tip">HesaplamanÄ±n baÅŸlangÄ±Ã§ tutarÄ±</div></div></div><div class="value">${fmtTL(arac)}</div></div><div class="sep"></div>${rows}<div class="sep"></div><div class="sum"><div>Toplam Vergiler (KDV hariÃ§)</div><div>${fmtTL(vergiToplami)}</div></div><div class="sum sum--warn"><div>KDV <span class="badge">%${(RATES.kdv*100).toFixed(0)}</span></div><div>${fmtTL(kdv)}</div></div><div class="sep"></div><div class="sum" style="background:#e8f2ff;border-color:#cfe2ff"><div>ğŸš— Toplam Ã–denecek Tutar</div><div>${fmtTL(toplam)}</div></div>`;
  }
  el.calc.addEventListener('click', e=>{e.preventDefault();hesapla();});
  el.reset.addEventListener('click', e=>{e.preventDefault();el.form.reset();el.card.hidden=true;});
})();
</script>

<script>
if ('serviceWorker' in navigator) {
  window.addEventListener('load', function() {
    navigator.serviceWorker.register('./service-worker.js').catch(function(err){
      console.log('SW kayÄ±t hatasÄ±:', err);
    });
  });
}
</script>

</body>
</html>